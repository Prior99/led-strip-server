---

- name: install nginx
  pacman: name=nginx-mainline state=present
  become: true

- name: configure nginx
  template: src=nginx.conf.j2 dest=/etc/nginx/nginx.conf owner=root group=root mode=644
  become: true
  notify:
    - restart nginx

- name: create vhosts directory
  file: state=directory path=/etc/nginx/vhosts owner=root group=root mode=755
  become: true

- name: create default nginx log directory
  file: state=directory path=/var/log/nginx/default owner=http group=log mode=750
  become: true

- name: enable nginx
  service: name=nginx enabled=yes
  become: true
